<dom-module id="bridge-mini-scoreboard">
  <style>
    :host {
      display: block;
    }

    .table-container {
      overflow-x: auto;
    }

    /* The follow CSS is copied from Bootstrap 4 */
    table {
      width: 100%;
      margin-bottom: 1rem;
      border-collapse: collapse;
    }

    table thead th {
      vertical-align: bottom;
      border-bottom: 2px solid #eceeef;
    }

    table td, table th {
      padding: .75rem;
      line-height: 1.5;
      vertical-align: top;
      border-top: 1px solid #eceeef;
    }

    th {
      text-align: left;
    }
  </style>

  <template>
    <div class="table-container">
      <table>

        <thead>
          <tr>
            <th></th>
            <template is="dom-repeat" items="[[service.players]]">
              <th>[[item.name]]</th>
            </template>
          </tr>
        </thead>

        <tbody>

          <tr>
            <td>This round score</td>
            <template is="dom-repeat" items="[[service.players]]">
              <td>[[_roundScore(item.score, service.currentRound)]]</td>
            </template>
          </tr>

          <tr>
            <td>Total score</td>
            <template is="dom-repeat" items="[[service.players]]">
              <td>[[_getTotalScore(item, item.score)]]</td>
            </template>
          </tr>
        </tbody>

      </table>
    </div>
  </template>

  <script>
    Polymer({
      is: 'bridge-mini-scoreboard',

      properties: {
        service: {
          type: Object
        }
      },

      _roundScore(scores, currentRound) {
        let res = scores[currentRound - 1];
        if (res) {
          return res
        } else {
          return 0
        }
      },

      _getTotalScore(player) {
        return player.totalScore
      }
    });
  </script>
</dom-module>
